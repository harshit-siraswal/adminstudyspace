<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudySpace Admin Dashboard</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="StudySpace Admin Dashboard - Manage resources, notices, and syllabi">

    <!-- Favicon -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üõ°Ô∏è</text></svg>">

    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="mobile.css">

    <!-- Google reCAPTCHA v3 -->
    <script src="https://www.google.com/recaptcha/api.js?render=6LezUEAsAAAAAGQMAgp33ulSj4B_lRs2S_Q3G8ha"></script>
</head>

<body>
    <!-- ============================================
         ANIMATED BACKGROUND PARTICLES
         To adjust: Change particle colors in CSS variables
         ============================================ -->
    <div class="bg-particles">
        <div class="particle particle-1"></div>
        <div class="particle particle-2"></div>
        <div class="particle particle-3"></div>
    </div>

    <!-- ============================================
         LOGIN PAGE
         ============================================ -->
    <div id="loginPage" class="page active">
        <div class="container"
            style="display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 1.5rem;">

            <!-- Login Card with Glass Effect -->
            <div class="glass-card motion-card" style="width: 100%; max-width: 420px; padding: 2.5rem;">

                <!-- Logo -->
                <div style="display: flex; justify-content: center; margin-bottom: 2rem;">
                    <div class="nav-logo-icon" style="width: 72px; height: 72px; border-radius: var(--radius-lg);">
                        <i data-lucide="shield" class="icon-lg" style="color: white;"></i>
                    </div>
                </div>

                <!-- Header -->
                <div style="text-align: center; margin-bottom: 2rem;">
                    <h1 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--text-primary);">
                        Admin
                        Portal</h1>
                    <p
                        style="color: var(--text-muted); font-size: 0.9rem; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                        <i data-lucide="sparkles" class="icon-sm"></i>
                        StudySpace Content Moderation
                    </p>
                </div>

                <!-- Login Form -->
                <form id="loginForm" style="margin-bottom: 1.5rem;" onsubmit="handleLogin(event); return false;">
                    <div class="form-group">
                        <label class="form-label" for="secretKey">Admin Secret Key</label>
                        <div class="input-wrapper" style="position: relative;">
                            <i data-lucide="lock" class="input-icon icon-sm"></i>
                            <input type="password" id="secretKey" name="secretKey" class="form-input"
                                placeholder="Enter your secret key" required autocomplete="off"
                                style="padding-right: 3rem;">
                            <button type="button" id="togglePassword"
                                style="position: absolute; right: 0.75rem; top: 50%; transform: translateY(-50%); background: none; border: none; color: var(--text-muted); cursor: pointer; padding: 0.5rem; display: flex; align-items: center; justify-content: center; z-index: 20;"
                                onclick="togglePasswordVisibility()" title="Show/Hide Password">
                                <i data-lucide="eye" id="eyeIcon" class="icon-sm"></i>
                                <i data-lucide="eye-off" id="eyeOffIcon" class="icon-sm hidden"></i>
                            </button>
                        </div>
                    </div>

                    <button type="submit" id="loginBtn" class="btn btn-primary btn-block btn-lg">
                        <span id="loginBtnText">Access Dashboard</span>
                        <div id="loginSpinner" class="spinner hidden"></div>
                    </button>
                </form>

                <!-- Security Note -->
                <div class="glass-card"
                    style="padding: 1rem; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
                    <i data-lucide="shield-check" class="icon-sm"
                        style="color: var(--color-success); flex-shrink: 0;"></i>
                    <p style="font-size: 0.8rem; color: var(--text-muted);">
                        Your credentials are encrypted and secure. Sessions expire after 24 hours.
                    </p>
                </div>

                <!-- Back Link -->
                <div style="text-align: center;">
                    <a href="https://studyspace.com" target="_blank"
                        style="display: inline-flex; align-items: center; gap: 0.5rem; font-size: 0.875rem; color: var(--text-muted); text-decoration: none; transition: color 0.2s;">
                        <i data-lucide="arrow-left" class="icon-sm"></i>
                        Back to StudySpace
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================
         DASHBOARD PAGE
         ============================================ -->
    <div id="dashboardPage" class="page">
        <div class="dashboard-layout">

            <!-- ========== MOBILE HEADER ========== -->
            <header class="mobile-header">
                <div class="mobile-header-logo">
                    <div class="nav-logo-icon" style="width: 32px; height: 32px;">
                        <i data-lucide="shield" style="color: white; width: 16px; height: 16px;"></i>
                    </div>
                    <span class="mobile-header-title">StudySpace</span>
                </div>
                <div class="mobile-header-actions">
                    <span id="mobileAdminName" class="mobile-admin-name"></span>
                    <button class="mobile-header-btn" onclick="toggleTheme()" title="Toggle Theme">
                        <i data-lucide="sun" class="icon-sun"></i>
                        <i data-lucide="moon" class="icon-moon"></i>
                    </button>
                    <button class="mobile-header-btn mobile-logout-btn" onclick="handleLogout()" title="Logout">
                        <i data-lucide="log-out"></i>
                    </button>
                </div>
            </header>

            <!-- ========== SIDEBAR (DESKTOP ONLY) ========== -->

            <!-- ========== SIDEBAR ========== -->
            <aside class="sidebar glass-card" id="sidebar">
                <!-- Logo -->
                <!-- Logo -->
                <div class="sidebar-header">
                    <div class="nav-logo-icon" style="width: 40px; height: 40px;">
                        <i data-lucide="shield" style="color: white; width: 20px; height: 20px;"></i>
                    </div>
                    <div>
                        <div class="sidebar-title">StudySpace</div>
                        <div class="sidebar-subtitle">Admin Panel</div>
                    </div>
                </div>

                <!-- Admin Info -->
                <div class="sidebar-admin">
                    <i data-lucide="user-circle" class="icon-sm"></i>
                    <span id="adminName">Admin</span>
                </div>

                <!-- Navigation -->
                <nav class="sidebar-nav">
                    <button class="sidebar-nav-item active" data-tab="resources" onclick="switchTab('resources')">
                        <i data-lucide="folder-open" class="icon-sm"></i>
                        <span>Resources</span>
                    </button>
                    <button class="sidebar-nav-item" data-tab="notices" onclick="switchTab('notices')">
                        <i data-lucide="bell" class="icon-sm"></i>
                        <span>Notices</span>
                    </button>
                    <button class="sidebar-nav-item" data-tab="syllabus" onclick="switchTab('syllabus')">
                        <i data-lucide="book-open" class="icon-sm"></i>
                        <span>Syllabus</span>
                    </button>
                    <button class="sidebar-nav-item" data-tab="users" onclick="switchTab('users')">
                        <i data-lucide="users" class="icon-sm"></i>
                        <span>Users</span>
                    </button>
                </nav>

                <!-- Bottom Actions -->
                <div class="sidebar-footer">
                    <button class="sidebar-action" onclick="toggleTheme()" title="Toggle Theme">
                        <i data-lucide="sun" class="icon-sun icon-sm"></i>
                        <i data-lucide="moon" class="icon-moon icon-sm"></i>
                        <span>Theme</span>
                    </button>
                    <button id="logoutBtn" class="sidebar-action sidebar-logout" onclick="handleLogout()">
                        <i data-lucide="log-out" class="icon-sm"></i>
                        <span>Logout</span>
                    </button>
                </div>
            </aside>

            <!-- ========== MAIN CONTENT ========== -->
            <main class="dashboard-main">
                <div class="dashboard-content">

                    <!-- ========== RESOURCES SECTION ========== -->
                    <section id="resources-section" class="tab-content active">

                        <!-- Stats Grid -->
                        <div class="stats-grid">
                            <!-- Pending Card -->
                            <div class="glass-card stat-card stat-pending">
                                <div class="stat-info">
                                    <span class="stat-label">Pending</span>
                                    <span class="stat-value" id="statPending">0</span>
                                </div>
                                <div class="stat-icon">
                                    <i data-lucide="clock"></i>
                                </div>
                            </div>

                            <!-- Approved Card -->
                            <div class="glass-card stat-card stat-approved">
                                <div class="stat-info">
                                    <span class="stat-label">Approved</span>
                                    <span class="stat-value" id="statApproved">0</span>
                                </div>
                                <div class="stat-icon">
                                    <i data-lucide="check-circle-2"></i>
                                </div>
                            </div>

                            <!-- Rejected Card -->
                            <div class="glass-card stat-card stat-rejected">
                                <div class="stat-info">
                                    <span class="stat-label">Rejected</span>
                                    <span class="stat-value" id="statRejected">0</span>
                                </div>
                                <div class="stat-icon">
                                    <i data-lucide="x-circle"></i>
                                </div>
                            </div>

                            <!-- Total Card -->
                            <div class="glass-card stat-card stat-total">
                                <div class="stat-info">
                                    <span class="stat-label">Total</span>
                                    <span class="stat-value" id="statTotal">0</span>
                                </div>
                                <div class="stat-icon">
                                    <i data-lucide="layers"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Filters Card -->
                        <div class="glass-card" style="padding: 1.5rem; margin-bottom: 1.5rem;">
                            <div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">

                                <!-- Search -->
                                <div class="input-wrapper" style="flex: 1; min-width: 250px;">
                                    <i data-lucide="search" class="input-icon icon-sm"></i>
                                    <input type="search" id="searchInput" class="form-input"
                                        placeholder="Search resources...">
                                </div>

                                <!-- Filter Dropdowns -->
                                <div
                                    style="display: flex; gap: 0.75rem; align-items: center; overflow-x: auto; padding-bottom: 2px;">
                                    <select id="filterSemester" class="form-select" style="min-width: 140px;">
                                        <option value="all">Semester</option>
                                        <option value="1">Sem 1</option>
                                        <option value="2">Sem 2</option>
                                        <option value="3">Sem 3</option>
                                        <option value="4">Sem 4</option>
                                        <option value="5">Sem 5</option>
                                        <option value="6">Sem 6</option>
                                        <option value="7">Sem 7</option>
                                        <option value="8">Sem 8</option>
                                    </select>

                                    <select id="filterBranch" class="form-select" style="min-width: 160px;">
                                        <option value="all">All Branches</option>
                                        <option value="cse">Computer Science</option>
                                        <option value="ece">Electronics</option>
                                        <option value="me">Mechanical</option>
                                        <option value="ce">Civil</option>
                                        <option value="eee">Electrical</option>
                                        <option value="aiml">AI & ML</option>
                                        <option value="ds">Data Science</option>
                                        <option value="it">Information Technology</option>
                                    </select>

                                    <select id="filterSubject" class="form-select" style="min-width: 160px;" disabled>
                                        <option value="all">All Subjects</option>
                                    </select>

                                    <select id="filterStatus" class="form-select" style="min-width: 140px;">
                                        <option value="all">All Status</option>
                                        <option value="pending">Pending</option>
                                        <option value="approved">Approved</option>
                                        <option value="rejected">Rejected</option>
                                    </select>

                                    <!-- Action Buttons -->
                                    <div style="display: flex; gap: 0.5rem; margin-left: auto;">
                                        <button id="saveFiltersBtn" class="btn btn-secondary btn-sm">
                                            <i data-lucide="save" class="icon-sm"></i>
                                            Save
                                        </button>
                                        <button id="loadFiltersBtn" class="btn btn-secondary btn-sm">
                                            Load Saved
                                        </button>
                                        <button id="clearFiltersBtn" class="btn btn-ghost btn-sm">
                                            <i data-lucide="x" class="icon-sm"></i>
                                            Clear
                                        </button>
                                        <button id="refreshBtn" class="btn btn-ghost btn-sm">
                                            <i data-lucide="refresh-cw" class="icon-sm"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Resources Header -->
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                            <h2 id="resourcesCount"
                                style="font-size: 1.1rem; font-weight: 500; color: var(--text-secondary);">0 Resources
                                Found
                            </h2>
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <div id="pendingBadge" class="status-badge status-pending hidden">
                                    <i data-lucide="clock" class="icon-xs"></i>
                                    <span id="pendingCount">0</span> awaiting review
                                </div>
                                <button class="btn btn-primary" onclick="showUploadResourceModal()">
                                    <i data-lucide="upload" class="icon-sm"></i>
                                    Upload Resource
                                </button>
                            </div>
                        </div>

                        <!-- Loading State -->
                        <div id="loadingState" class="loading-state hidden">
                            <div class="spinner spinner-lg"></div>
                        </div>

                        <!-- Empty State -->
                        <div id="emptyState" class="glass-card empty-state hidden">
                            <i data-lucide="filter" class="empty-icon"></i>
                            <h3 class="empty-title">No resources found</h3>
                            <p class="empty-description">Try adjusting your filters or search query</p>
                        </div>

                        <!-- Resources List -->
                        <div id="resourcesList" class="resource-list"></div>
                </div>

                <!-- ============================================
                     NOTICES TAB
                     ============================================ -->
                <div id="notices-section" class="tab-content">

                    <!-- Section Header -->
                    <div class="glass-card section-header">
                        <div style="display: flex; align-items: center; gap: 0.75rem; flex: 1;">
                            <label
                                style="font-size: 0.9rem; color: var(--text-muted); white-space: nowrap;">Department:</label>
                            <select id="notices-dept-filter" class="form-select" onchange="filterNoticesByDept()"
                                style="min-width: 200px;">
                                <option value="all">All Departments</option>
                                <option value="cse">Computer Science</option>
                                <option value="ece">Electronics</option>
                                <option value="me">Mechanical</option>
                                <option value="ce">Civil</option>
                                <option value="eee">Electrical</option>
                                <option value="aiml">AI & ML</option>
                                <option value="ds">Data Science</option>
                                <option value="it">Information Technology</option>
                            </select>
                        </div>

                        <button class="btn btn-primary" onclick="showNoticeForm()">
                            <i data-lucide="plus" class="icon-sm"></i>
                            New Notice
                        </button>
                    </div>

                    <!-- Search Bar -->
                    <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem;">
                        <div class="input-wrapper" style="flex: 1;">
                            <i data-lucide="search" class="input-icon icon-sm"></i>
                            <input type="search" id="notices-search" class="form-input"
                                placeholder="Search notices by title or content..." oninput="searchNotices()">
                        </div>

                        <select id="notices-sort" class="form-select" onchange="sortNotices()"
                            style="min-width: 150px;">
                            <option value="newest">Newest First</option>
                            <option value="oldest">Oldest First</option>
                            <option value="priority">By Priority</option>
                        </select>
                    </div>

                    <!-- Notice Form (Hidden by default) -->
                    <div id="notice-form" class="glass-card form-card" style="display: none;">
                        <div class="form-card-header">
                            <h3 class="form-card-title">Create New Notice</h3>
                            <button type="button" class="btn btn-ghost btn-sm" onclick="hideNoticeForm()">
                                <i data-lucide="x" class="icon-sm"></i>
                            </button>
                        </div>

                        <form id="notice-form-element" onsubmit="createNotice(event)">
                            <!-- Basic Info -->
                            <div class="form-group">
                                <label class="form-label">Title *</label>
                                <input type="text" id="notice-title" class="form-input" required
                                    placeholder="Enter notice title" maxlength="200">
                            </div>

                            <div class="form-group">
                                <label class="form-label">Content *</label>
                                <textarea id="notice-content" class="form-textarea" required rows="6"
                                    placeholder="Enter notice content..."></textarea>
                            </div>

                            <!-- Settings Row -->
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Department *</label>
                                    <select id="notice-department" class="form-select" required>
                                        <option value="all">All Departments</option>
                                        <option value="cse">Computer Science</option>
                                        <option value="ece">Electronics</option>
                                        <option value="me">Mechanical</option>
                                        <option value="ce">Civil</option>
                                        <option value="eee">Electrical</option>
                                        <option value="aiml">AI & ML</option>
                                        <option value="ds">Data Science</option>
                                        <option value="it">Information Technology</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Priority *</label>
                                    <select id="notice-priority" class="form-select" required>
                                        <option value="normal">Normal</option>
                                        <option value="low">Low</option>
                                        <option value="high">High</option>
                                        <option value="urgent">Urgent</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Expires On (Optional)</label>
                                    <input type="date" id="notice-expires" class="form-input">
                                </div>
                            </div>

                            <!-- File Attachment -->
                            <div class="form-group">
                                <label class="form-label">Attachment (Optional)</label>
                                <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem;">
                                    <label class="glass-card"
                                        style="padding: 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; flex: 1; min-width: 120px;">
                                        <input type="radio" name="file-type" value="none" checked
                                            onchange="toggleFileUpload('none')">
                                        <i data-lucide="x" class="icon-sm"></i>
                                        <span>No File</span>
                                    </label>
                                    <label class="glass-card"
                                        style="padding: 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; flex: 1; min-width: 120px;">
                                        <input type="radio" name="file-type" value="pdf"
                                            onchange="toggleFileUpload('pdf')">
                                        <i data-lucide="file-text" class="icon-sm"></i>
                                        <span>PDF</span>
                                    </label>
                                    <label class="glass-card"
                                        style="padding: 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; flex: 1; min-width: 120px;">
                                        <input type="radio" name="file-type" value="video"
                                            onchange="toggleFileUpload('video')">
                                        <i data-lucide="video" class="icon-sm"></i>
                                        <span>Video URL</span>
                                    </label>
                                </div>

                                <div id="pdf-upload-section" style="display: none;">
                                    <input type="file" id="notice-pdf" class="form-input" accept="application/pdf">
                                    <small style="color: var(--text-muted);">Max size: 10MB</small>
                                </div>

                                <div id="video-url-section" style="display: none;">
                                    <input type="url" id="notice-video-url" class="form-input"
                                        placeholder="https://...">
                                    <small style="color: var(--text-muted);">Paste the shareable link</small>
                                </div>
                            </div>

                            <!-- Actions -->
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="notice-submit-btn">
                                    <i data-lucide="send" class="icon-sm"></i>
                                    Post Notice
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="hideNoticeForm()">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Notices Stats -->
                    <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                        <div class="glass-card"
                            style="padding: 0.6rem 1rem; display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; color: var(--text-muted);">
                            <i data-lucide="file-text" class="icon-sm"></i>
                            <span id="notices-total-count"
                                style="font-weight: 600; color: var(--text-primary);">0</span>
                            Total
                        </div>
                        <div class="glass-card"
                            style="padding: 0.6rem 1rem; display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; color: var(--text-muted);">
                            <i data-lucide="eye" class="icon-sm"></i>
                            <span id="notices-active-count"
                                style="font-weight: 600; color: var(--text-primary);">0</span>
                            Active
                        </div>
                        <div class="glass-card"
                            style="padding: 0.6rem 1rem; display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; color: var(--text-muted);">
                            <i data-lucide="eye-off" class="icon-sm"></i>
                            <span id="notices-hidden-count"
                                style="font-weight: 600; color: var(--text-primary);">0</span>
                            Hidden
                        </div>
                    </div>

                    <!-- Notices Grid -->
                    <div id="notices-list" class="notices-grid"></div>

                    <!-- Empty State -->
                    <div id="notices-empty" class="glass-card empty-state" style="display: none;">
                        <i data-lucide="bell-off" class="empty-icon"></i>
                        <h3 class="empty-title">No notices found</h3>
                        <p class="empty-description">Create your first notice or adjust filters</p>
                    </div>
                </div>

                <!-- ============================================
                     SYLLABUS TAB
                     ============================================ -->
                <div id="syllabus-section" class="tab-content">

                    <!-- Section Header -->
                    <div class="glass-card section-header">
                        <h2 class="section-title">Syllabus Management</h2>
                        <button class="btn btn-primary" onclick="showSyllabusForm()">
                            <i data-lucide="upload" class="icon-sm"></i>
                            Upload Syllabus
                        </button>
                    </div>

                    <!-- Syllabus Form (Hidden by default) -->
                    <div id="syllabus-form" class="glass-card form-card" style="display: none;">
                        <div class="form-card-header">
                            <h3 class="form-card-title">Upload New Syllabus</h3>
                            <button type="button" class="btn btn-ghost btn-sm" onclick="hideSyllabusForm()">
                                <i data-lucide="x" class="icon-sm"></i>
                            </button>
                        </div>

                        <form onsubmit="uploadSyllabus(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Semester *</label>
                                    <select id="syllabus-semester" class="form-select" required>
                                        <option value="">Select Semester</option>
                                        <option value="1">Semester 1</option>
                                        <option value="2">Semester 2</option>
                                        <option value="3">Semester 3</option>
                                        <option value="4">Semester 4</option>
                                        <option value="5">Semester 5</option>
                                        <option value="6">Semester 6</option>
                                        <option value="7">Semester 7</option>
                                        <option value="8">Semester 8</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Branch *</label>
                                    <select id="syllabus-branch" class="form-select" required
                                        onchange="loadSyllabusSubjects()">
                                        <option value="">Select Branch</option>
                                        <option value="cse">Computer Science</option>
                                        <option value="ece">Electronics</option>
                                        <option value="me">Mechanical</option>
                                        <option value="ce">Civil</option>
                                        <option value="eee">Electrical</option>
                                        <option value="aiml">AI & ML</option>
                                        <option value="ds">Data Science</option>
                                        <option value="it">Information Technology</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Subject *</label>
                                    <select id="syllabus-subject" class="form-select" required>
                                        <option value="">Select Branch First</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group" style="grid-column: 1 / -1;">
                                    <label class="form-label">Title *</label>
                                    <input type="text" id="syllabus-title" class="form-input" required
                                        placeholder="e.g., Data Structures Syllabus 2024-25">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Academic Year *</label>
                                    <input type="text" id="syllabus-year" class="form-input" required
                                        placeholder="e.g., 2024-25" value="2024-25">
                                </div>

                                <div class="form-group">
                                    <label class="form-label">PDF File *</label>
                                    <input type="file" id="syllabus-file" class="form-input" required
                                        accept="application/pdf">
                                    <small style="color: var(--text-muted);">Max size: 10MB</small>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="syllabus-submit-btn">
                                    <i data-lucide="upload" class="icon-sm"></i>
                                    Upload Syllabus
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="hideSyllabusForm()">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Syllabus List -->
                    <div id="syllabus-list" class="syllabus-grid"></div>
                </div>

                <!-- ========== USERS SECTION ========== -->
                <section id="users-section" class="tab-content" style="display: none;">
                    <div class="section-header" style="margin-bottom: 1.5rem;">
                        <div>
                            <h2 class="section-title">User Management</h2>
                            <p style="color: var(--text-muted); font-size: 0.9rem;">Ban or unban users from accessing
                                StudySpace</p>
                        </div>
                    </div>

                    <!-- Ban User Form -->
                    <div class="glass-card" style="padding: 1.5rem; margin-bottom: 1.5rem;">
                        <h3 style="font-size: 1rem; font-weight: 600; margin-bottom: 1rem;">Ban a User</h3>
                        <form id="banUserForm" onsubmit="handleBanUser(event)">
                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <div class="input-wrapper" style="flex: 1; min-width: 250px;">
                                    <i data-lucide="mail" class="input-icon icon-sm"></i>
                                    <input type="email" id="banEmail" class="form-input"
                                        placeholder="Enter email to ban" required>
                                </div>
                                <div class="input-wrapper" style="flex: 1; min-width: 200px;">
                                    <i data-lucide="message-square" class="input-icon icon-sm"></i>
                                    <input type="text" id="banReason" class="form-input"
                                        placeholder="Reason (optional)">
                                </div>
                                <button type="submit" class="btn btn-danger">
                                    <i data-lucide="ban" class="icon-sm"></i>
                                    Ban User
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Banned Users List -->
                    <div class="glass-card" style="padding: 1.5rem;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h3 style="font-size: 1rem; font-weight: 600;">Banned Users</h3>
                            <button class="btn btn-secondary btn-sm" onclick="loadBannedUsers()">
                                <i data-lucide="refresh-cw" class="icon-sm"></i>
                                Refresh
                            </button>
                        </div>
                        <div id="bannedUsersList" class="banned-users-list">
                            <p style="text-align: center; color: var(--text-muted); padding: 2rem;">Loading...</p>
                        </div>
                    </div>
                </section>

        </div>
        </main>
    </div>
    </div>

    <!-- ============================================
         MOBILE BOTTOM NAVIGATION
         ============================================ -->
    <nav class="mobile-bottom-nav" id="mobileBottomNav">
        <div class="mobile-nav-items">
            <button class="mobile-nav-item active" data-tab="resources" onclick="switchTab('resources')">
                <i data-lucide="folder-open"></i>
                <span>Resources</span>
            </button>
            <button class="mobile-nav-item" data-tab="notices" onclick="switchTab('notices')">
                <i data-lucide="bell"></i>
                <span>Notices</span>
            </button>
            <button class="mobile-nav-item" data-tab="syllabus" onclick="switchTab('syllabus')">
                <i data-lucide="book-open"></i>
                <span>Syllabus</span>
            </button>
            <button class="mobile-nav-item" data-tab="users" onclick="switchTab('users')">
                <i data-lucide="users"></i>
                <span>Users</span>
            </button>
        </div>
    </nav>

    <!-- ============================================
         UPLOAD RESOURCE MODAL
         ============================================ -->
    <div id="uploadResourceModal" class="upload-modal-overlay" style="display: none;">
        <div class="glass-card upload-modal">
            <!-- Modal Header -->
            <div class="upload-modal-header">
                <div>
                    <h2 class="upload-modal-title">Share a Resource</h2>
                    <p class="upload-modal-subtitle">Upload notes or suggest a video to help your peers.</p>
                </div>
                <button type="button" class="btn btn-ghost btn-sm" onclick="hideUploadResourceModal()">
                    <i data-lucide="x" class="icon-sm"></i>
                </button>
            </div>

            <!-- Tabs -->
            <div class="upload-tabs">
                <button class="upload-tab active" data-tab="notes" onclick="switchUploadTab('notes')">
                    <i data-lucide="file-text" class="icon-sm"></i>
                    Notes
                </button>
                <button class="upload-tab" data-tab="video" onclick="switchUploadTab('video')">
                    <i data-lucide="video" class="icon-sm"></i>
                    Video
                </button>
            </div>

            <!-- Form -->
            <form id="uploadResourceForm" onsubmit="uploadTeacherResource(event)">
                <!-- Title -->
                <div class="form-group">
                    <label class="form-label">Title <span style="color: var(--color-error);">*</span></label>
                    <input type="text" id="upload-title" class="form-input" placeholder="e.g., Binary Search Tree Notes"
                        required>
                </div>

                <!-- Semester & Branch Row -->
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Semester <span style="color: var(--color-error);">*</span></label>
                        <select id="upload-semester" class="form-select" required>
                            <option value="">Select semester</option>
                            <option value="1">Semester 1</option>
                            <option value="2">Semester 2</option>
                            <option value="3">Semester 3</option>
                            <option value="4">Semester 4</option>
                            <option value="5">Semester 5</option>
                            <option value="6">Semester 6</option>
                            <option value="7">Semester 7</option>
                            <option value="8">Semester 8</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Branch <span style="color: var(--color-error);">*</span></label>
                        <select id="upload-branch" class="form-select" required onchange="loadUploadSubjects()">
                            <option value="">Select branch</option>
                            <option value="cse">Computer Science</option>
                            <option value="ece">Electronics</option>
                            <option value="me">Mechanical</option>
                            <option value="ce">Civil</option>
                            <option value="eee">Electrical</option>
                            <option value="aiml">AI & ML</option>
                            <option value="ds">Data Science</option>
                            <option value="it">Information Technology</option>
                        </select>
                    </div>
                </div>

                <!-- Subject, Chapter, Topic Row -->
                <div class="form-row" style="grid-template-columns: 1fr 1fr 1fr;">
                    <div class="form-group">
                        <label class="form-label">Subject <span style="color: var(--color-error);">*</span></label>
                        <select id="upload-subject" class="form-select" required>
                            <option value="">Select subject</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Chapter</label>
                        <input type="text" id="upload-chapter" class="form-input" placeholder="e.g., Chapter 3">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Topic</label>
                        <input type="text" id="upload-topic" class="form-input" placeholder="e.g., Trees">
                    </div>
                </div>

                <!-- Resource Type (Notes tab only) -->
                <div id="resource-type-section" class="form-group">
                    <label class="form-label">Resource Type</label>
                    <select id="upload-resource-type" class="form-select">
                        <option value="notes">Notes</option>
                        <option value="pyq">Previous Year Questions</option>
                    </select>
                </div>

                <!-- Brief Description -->
                <div class="form-group">
                    <label class="form-label">Brief Description</label>
                    <textarea id="upload-description" class="form-textarea" rows="3"
                        placeholder="Brief description of the content..."></textarea>
                </div>

                <!-- File Upload (Notes tab) -->
                <div id="file-upload-section" class="form-group">
                    <label class="form-label">Upload File <span style="color: var(--color-error);">*</span></label>
                    <div class="upload-drop-zone" id="uploadDropZone"
                        onclick="document.getElementById('upload-file').click()">
                        <i data-lucide="upload" class="upload-drop-icon"></i>
                        <p class="upload-drop-text">Click to upload or drag and drop</p>
                        <p class="upload-drop-hint">PDF, DOC, DOCX up to 10MB</p>
                        <input type="file" id="upload-file" style="display: none;" accept=".pdf,.doc,.docx"
                            onchange="handleFileSelect(event)">
                    </div>
                    <div id="selected-file-info" class="selected-file-info" style="display: none;">
                        <i data-lucide="file-text" class="icon-sm"></i>
                        <span id="selected-file-name"></span>
                        <button type="button" class="btn btn-ghost btn-sm" onclick="clearSelectedFile()">
                            <i data-lucide="x" class="icon-xs"></i>
                        </button>
                    </div>
                </div>

                <!-- Video URL (Video tab) -->
                <div id="video-url-section" class="form-group" style="display: none;">
                    <label class="form-label">Video URL <span style="color: var(--color-error);">*</span></label>
                    <input type="url" id="upload-video-url" class="form-input"
                        placeholder="https://youtube.com/watch?v=...">
                    <small style="color: var(--text-muted);">Paste a YouTube, Vimeo, or other video URL</small>
                </div>

                <!-- Form Actions -->
                <div class="form-actions" style="margin-top: 1.5rem;">
                    <button type="button" class="btn btn-secondary" onclick="hideUploadResourceModal()">Cancel</button>
                    <button type="submit" id="upload-submit-btn" class="btn btn-primary">
                        <i data-lucide="upload" class="icon-sm"></i>
                        <span id="upload-submit-text">Upload Notes</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- ============================================
         TOAST NOTIFICATIONS CONTAINER
         ============================================ -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- ============================================
         SCRIPTS
         Order matters - load dependencies first
         ============================================ -->
    <script src="config.js"></script>
    <script src="auth.js"></script>
    <script src="dashboard.js"></script>
    <script src="motion.js"></script>
    <script src="app.js"></script>
    <script src="notices-syllabus.js"></script>
    <script src="improved-notices.js"></script>
    <script src="users.js"></script>
    <script src="upload-resource.js"></script>

    <!-- Initialize Lucide Icons -->
    <script>
        lucide.createIcons();
    </script>
</body>

</html>